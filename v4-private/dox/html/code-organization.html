<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MPQC-Docs: Code Organization</title>
<!--BEGIN PROJECT_ICON-->
<link rel="icon" href="$projecticon" type="image/x-icon" />
<!--END PROJECT_ICON-->
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!--BEGIN COPY_CLIPBOARD-->
<script type="text/javascript" src="clipboard.js"></script>
<!--END COPY_CLIPBOARD-->
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init();
        DoxygenAwesomeParagraphLink.init();
    </script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"$logosize/></td>
  <td id="projectalign">
   <div id="projectname">MPQC-Docs<span id="projectnumber">&#160;4.0.0-beta.1</span>
   </div>
   <div id="projectbrief">Massively Parallel Electronic Structure platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Code Organization</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="code-organization-modules"></a>
Modules</h1>
<p>MPQC is a collection of libraries linked into a minimal end-user program. Each library is a logical module; eventually they will become C++ modules, with proper separation between public interface and implementation details, when support for modules by the compilers and build tools becomes more mature. In the meantime, it is programmer's responsibility to organize the MPQC source code and build harness appropriately to emulate modular behavior.</p>
<p>Modular structure of MPQC is shown below.</p>
<div class="image">
<img src="modules.png" alt=""/>
<div class="caption">
Modular structure of MPQC</div></div>
   <p>Source code organization, as detailed in <a class="el" href="srctree.html">The Source Tree</a> , directly mirrors the modular structure of MPQC. The following rules govern the source code structure, and the related structure of the build harness.</p>
<h2><a class="anchor" id="code-organization-modules-dir"></a>
One Module per Directory</h2>
<p>Each major module should be located in its own directory, with single <code>CMakeLists.txt</code> typically defining single <a href="https://cmake.org/cmake/help/latest/command/add_library.html#normal-libraries">CMake library target</a> or several <em>closely-related</em> library targets; there may be additional subdirectories, if needed, but they should not contain their own <code>CMakeLists.txt</code>. Module's <code>CMakeLists.txt</code> defines libraries by invoking <code>add_mpqc_hdr_library</code> (for a header-only library) or <code>add_mpqc_library</code> (for non-header-only library). Dependence of the library on other MPQC libraries and external dependencies (which have corresponding CMake imported targets) must be explicitly expressed by establishing dependence of the CMake library target of the corresponding prerequisite targets. Library's dependence on its prerequisites can occur at compile-time (by <code>#include</code> public header files of the prerequisite) and link-time (by containing references to symbols defined in the prerequisite's public binary artifacts, such as, object files, static libraries, shared libraries, and frameworks). Both types of dependencies must be specified explicitly. N.B. although omitting compile-time dependence on other MPQC libraries usually will not cause a mis-build, it can; specifying compile-time dependencies between CMake targets will also help to determine dependencies between MPQC C++ modules in the future.</p>
<p>This example shows how the CMake target is defined for the library located in <code>src/mpqc/chemistry/qc/lcao/wfn</code>: </p><div class="fragment"><div class="line"><span class="comment"># usually single list of source files is sufficient</span></div>
<div class="line"><span class="comment"># if some headers are non-public it may be necessary</span></div>
<div class="line"><span class="comment"># to specify the list of public headers separately</span></div>
<div class="line">set(sources</div>
<div class="line">  ao_wfn.cpp  ao_wfn.h  fwd.h</div>
<div class="line">  lcao_wfn.cpp  lcao_wfn.ipp  lcao_wfn.h</div>
<div class="line">  linkage.h  periodic_ao_wfn.cpp  periodic_ao_wfn.h</div>
<div class="line">  population_analysis.cpp  population_analysis.h</div>
<div class="line">  util.h  wfn.cpp  wfn.h</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># this defines MPQClcao_wfn library target</span></div>
<div class="line">add_mpqc_library(</div>
<div class="line">  <span class="comment"># library basename</span></div>
<div class="line">  lcao_wfn</div>
<div class="line">  <span class="comment"># list of source files (header files in the list will be ignored)</span></div>
<div class="line">  sources</div>
<div class="line">  <span class="comment"># list of public header files (non-header files in the list will be ignored)</span></div>
<div class="line">  sources</div>
<div class="line">  <span class="comment"># list of CMake targets on which this target will depend on</span></div>
<div class="line">  <span class="comment"># this may include both MPQC target and non-MPQC (hence, imported) targets</span></div>
<div class="line">  <span class="stringliteral">&quot;MPQCwfn;MPQClcao_factory;MPQCutil_misc;MPQCutil_keyval;MPQCmolecule;tiledarray&quot;</span></div>
<div class="line">  <span class="comment"># location of the public headers in the install tree</span></div>
<div class="line">  <span class="stringliteral">&quot;mpqc/chemistry/qc/lcao/wfn&quot;</span></div>
<div class="line">)</div>
</div><!-- fragment --><h2><a class="anchor" id="code-organization-modules-src"></a>
Explicit Instantiation of Template Functions/Classes</h2>
<p>Expensive-to-compile template classes and functions should be instantiated and included in library's binary artifact. This can be accomplished as follows by separating template declaration and definitions AND by using <code>extern template</code>'s to avoid multiple instantiation:</p><ul>
<li><em>Separate definition from declaration</em>: Definitions of member functions of template classes (or template free or member fucntions) should be kept separate from the <code>.h</code> header file in which they are declared; the separate "implementation header" file following <a href="https://boost.org/">Boost</a> should have the <code>.ipp</code> extension.</li>
<li><em>Single instantiation</em>: Duplicate instantiation of template classes and template functions can be avoided by declaring+defining their explicit instantiations, or <a href="https://isocpp.org/wiki/faq/cpp11-language-templates#extern-templates">extern templates</a>. Since extern template declaration and definition are almost duplicates of each other, single-source definition of both should be defined in a separate <code>.tpp</code> file which will be used to generate both extern declaration and definition.</li>
</ul>
<p>Consider a concrete example of non-template class <code>A</code>, non-template function <code>a</code>, template class <code>B</code>, and template function <code>b</code> that are closely related. Ordinarily one would place their code into a header file <code>module.h</code> containing declarations of <code>A</code> and <code>a</code> and definitions of <code>B</code> and <code>b</code> (for simplicity, header guard/<code>#pragma once</code> is omitted), </p><div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacempqc.html">mpqc</a> {</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">struct </span>A {</div>
<div class="line">    A();</div>
<div class="line">    <span class="keywordtype">void</span> a();</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> a();</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">  <span class="keyword">struct </span>B {</div>
<div class="line">    B() = <span class="keywordflow">default</span>;</div>
<div class="line">    <span class="keywordtype">void</span> b() {}</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">  <span class="keywordtype">void</span> b() {}</div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace mpqc</span></div>
<div class="ttc" id="anamespacempqc_html"><div class="ttname"><a href="namespacempqc.html">mpqc</a></div><div class="ttdoc">The top-level namespace for all Massively Parallel Quantum Chemistry package.</div><div class="ttdef"><b>Definition</b> libmpqc.cpp:1</div></div>
</div><!-- fragment --><p> , and a source file <code>module.cpp</code> containing declarations of <code>A</code> and <code>a</code>, </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;module.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacempqc.html">mpqc</a> {</div>
<div class="line"> </div>
<div class="line">  A::A() = <span class="keywordflow">default</span>;</div>
<div class="line">  <span class="keywordtype">void</span> A::a() {}</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> a() {}</div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace mpqc</span></div>
</div><!-- fragment --><p> . To avoid replicating costs of compiling template classes and functions the definitions of <code>b</code> and member functions of <code>B</code> and should be separated off into a separate file <code>module.ipp</code>: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;module.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacempqc.html">mpqc</a> {</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">  B::B() = <span class="keywordflow">default</span>;</div>
<div class="line">  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">  <span class="keywordtype">void</span> B::b() {}</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">  <span class="keywordtype">void</span> b() {}</div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace mpqc</span></div>
</div><!-- fragment --><p> (just like the ordinary header, it should be protected by a header guard/<code>#pragma once</code>, omitted here), with the corresponding definitions remaining in <code>module.h</code>: </p><div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacempqc.html">mpqc</a> {</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// definitions of A and a</span></div>
<div class="line"> <span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"> <span class="comment">// declaration of B</span></div>
<div class="line"> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"> <span class="keyword">struct </span>B {</div>
<div class="line">   B();</div>
<div class="line">   <span class="keywordtype">void</span> b();</div>
<div class="line"> };</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// declaration of b</span></div>
<div class="line"> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"> <span class="keywordtype">void</span> b();</div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace mpqc</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// to be completed ...</span></div>
</div><!-- fragment --><p> To be able to switch to the original (<code>.h</code> + <code>.cpp</code>) compilation model it is convenient to conditionally <code>#include</code> the <code>module.ipp</code> file in <code>module.h</code>: </p><div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacempqc.html">mpqc</a> {</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// definitions of A and a</span></div>
<div class="line"> <span class="comment">// +</span></div>
<div class="line"> <span class="comment">// declarations of B and b</span></div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace mpqc</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if !defined(MPQC_TEMPLATE_IMPLEMENTATION_SEPARATE)</span></div>
<div class="line"><span class="preprocessor">#  include &lt;module.ipp&gt;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><p> . Macro <code>MPQC_TEMPLATE_IMPLEMENTATION_SEPARATE</code> is defined by default to separate template declarations from definitions; undefining the macro restores the original compilation model.</p>
<p>Full benefit of separation of template declarations from their definitions occurs when duplicate template instantiation for common values of template parameters is avoided explicitly via the <code>extern template</code>. To use it place the following code in <code>module.tpp</code>: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="mpqc__extern__template_8h.html">mpqc/util/core/mpqc_extern_template.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacempqc.html">mpqc</a> {</div>
<div class="line"> </div>
<div class="line"><span class="comment">// will instantiate B for double and int explicitly</span></div>
<div class="line"><a class="code hl_define" href="mpqc__extern__template_8h.html#a97c67ada4747b93797c2308156d0ed59">MPQC_EXTERN_TEMPLATE</a>(<span class="keyword">class</span> B&lt;double&gt;);</div>
<div class="line"><a class="code hl_define" href="mpqc__extern__template_8h.html#a97c67ada4747b93797c2308156d0ed59">MPQC_EXTERN_TEMPLATE</a>(<span class="keyword">class</span> B&lt;int&gt;);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// will instantiate b for double and int explicitly</span></div>
<div class="line"><a class="code hl_define" href="mpqc__extern__template_8h.html#a97c67ada4747b93797c2308156d0ed59">MPQC_EXTERN_TEMPLATE</a>(<span class="keywordtype">void</span> b&lt;double&gt;);</div>
<div class="line"><a class="code hl_define" href="mpqc__extern__template_8h.html#a97c67ada4747b93797c2308156d0ed59">MPQC_EXTERN_TEMPLATE</a>(<span class="keywordtype">void</span> b&lt;int&gt;);</div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace mpqc</span></div>
<div class="ttc" id="ampqc__extern__template_8h_html"><div class="ttname"><a href="mpqc__extern__template_8h.html">mpqc_extern_template.h</a></div></div>
<div class="ttc" id="ampqc__extern__template_8h_html_a97c67ada4747b93797c2308156d0ed59"><div class="ttname"><a href="mpqc__extern__template_8h.html#a97c67ada4747b93797c2308156d0ed59">MPQC_EXTERN_TEMPLATE</a></div><div class="ttdeci">#define MPQC_EXTERN_TEMPLATE(ARGS...)</div><div class="ttdef"><b>Definition</b> mpqc_extern_template.h:33</div></div>
</div><!-- fragment --><p> (header guard is not needed here). This file can then be used to instantiate templates in <code>module.cpp</code>: </p><div class="fragment"><div class="line"><span class="preprocessor">#ifdef MPQC_TEMPLATE_IMPLEMENTATION_SEPARATE</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;module.ipp&gt;</span>  <span class="comment">// need template _definitions_ to instantiate them</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// force extern template specialization to be _defined_</span></div>
<div class="line"><span class="preprocessor">#define MPQC_EXTERN_TEMPLATE_INSTANTIATE</span></div>
<div class="line"><span class="preprocessor">#include &lt;module.tpp&gt;</span></div>
<div class="line"><span class="preprocessor">#undef MPQC_EXTERN_TEMPLATE_INSTANTIATE</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#else  </span><span class="comment">// if not separating definitions from declarations just include module.h</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;module.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacempqc.html">mpqc</a> {</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// definitions of A and a</span></div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace mpqc</span></div>
</div><!-- fragment --><p> Explicitly instantiated templates need to be <em>declared</em> in <code>module.h</code> by <code>#include</code>int <code>module.tpp</code>.</p>
<p>The resulting code organization</p><ul>
<li><code>module.h</code> <div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacempqc.html">mpqc</a> {</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">struct </span>A {</div>
<div class="line">    A();</div>
<div class="line">    <span class="keywordtype">void</span> a();</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> a();</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// declaration of B</span></div>
<div class="line"> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"> <span class="keyword">struct </span>B {</div>
<div class="line">   B();</div>
<div class="line">   <span class="keywordtype">void</span> b();</div>
<div class="line"> };</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// declaration of b</span></div>
<div class="line"> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"> <span class="keywordtype">void</span> b();</div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace mpqc</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if defined(MPQC_TEMPLATE_IMPLEMENTATION_SEPARATE)</span></div>
<div class="line"><span class="preprocessor">#  include &lt;module.tpp&gt;</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">#  include &lt;module.ipp&gt;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --></li>
<li><code>module.ipp</code> <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;module.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacempqc.html">mpqc</a> {</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">  B::B() = <span class="keywordflow">default</span>;</div>
<div class="line">  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">  <span class="keywordtype">void</span> B::b() {}</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">  <span class="keywordtype">void</span> b() {}</div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace mpqc</span></div>
</div><!-- fragment --></li>
<li><code>module.tpp</code> <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="mpqc__extern__template_8h.html">mpqc/util/core/mpqc_extern_template.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacempqc.html">mpqc</a> {</div>
<div class="line"> </div>
<div class="line"><span class="comment">// will instantiate B for double and int explicitly</span></div>
<div class="line"><a class="code hl_define" href="mpqc__extern__template_8h.html#a97c67ada4747b93797c2308156d0ed59">MPQC_EXTERN_TEMPLATE</a>(<span class="keyword">class</span> B&lt;double&gt;);</div>
<div class="line"><a class="code hl_define" href="mpqc__extern__template_8h.html#a97c67ada4747b93797c2308156d0ed59">MPQC_EXTERN_TEMPLATE</a>(<span class="keyword">class</span> B&lt;int&gt;);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// will instantiate b for double and int explicitly</span></div>
<div class="line"><a class="code hl_define" href="mpqc__extern__template_8h.html#a97c67ada4747b93797c2308156d0ed59">MPQC_EXTERN_TEMPLATE</a>(<span class="keywordtype">void</span> b&lt;double&gt;);</div>
<div class="line"><a class="code hl_define" href="mpqc__extern__template_8h.html#a97c67ada4747b93797c2308156d0ed59">MPQC_EXTERN_TEMPLATE</a>(<span class="keywordtype">void</span> b&lt;int&gt;);</div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace mpqc</span></div>
</div><!-- fragment --> -<code>module.cpp</code> <div class="fragment"><div class="line"><span class="preprocessor">#ifdef MPQC_TEMPLATE_IMPLEMENTATION_SEPARATE</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;module.ipp&gt;</span>  <span class="comment">// need template _definitions_ to instantiate them</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// force extern template specialization to be _defined_</span></div>
<div class="line"><span class="preprocessor">#define MPQC_EXTERN_TEMPLATE_INSTANTIATE</span></div>
<div class="line"><span class="preprocessor">#include &lt;module.tpp&gt;</span></div>
<div class="line"><span class="preprocessor">#undef MPQC_EXTERN_TEMPLATE_INSTANTIATE</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#else  </span><span class="comment">// if not separating definitions from declarations just include module.h</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;module.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacempqc.html">mpqc</a> {</div>
<div class="line"> </div>
<div class="line">  A::A() = <span class="keywordflow">default</span>;</div>
<div class="line">  <span class="keywordtype">void</span> A::a() {}</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> a() {}</div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace mpqc</span></div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="code-organization-modules-fwd"></a>
Single Forward Declaration Header</h2>
<p>Each library's forward declarations to be collected in the <code>fwd.h</code> file. Forward declarations should be used rarely, <a href="https://google.github.io/styleguide/cppguide.html#Forward_Declarations">if at all</a>, but <code>fwd.h</code> is useful as a single place for frequently-used global typedefs and as "the" place for defining default parameters in one spot.</p>
<h2><a class="anchor" id="code-organization-modules-linkage"></a>
Single Linkage Artifacts Header</h2>
<p>Each library's forward declarations are collected in the <code>linkage.h</code> file. <em>work in progress</em> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 13 2025 23:43:46 for MPQC-Docs by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
